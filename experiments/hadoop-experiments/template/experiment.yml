# Author: Michael Sevilla
# Deploy Hadoop on the localhost 

- include: lib/site.yml

- hosts: namenode
  tasks:
    - include_vars: group_vars/client

    - name: upload a small file
      command: "{{ hadoop }} dfs -copyFromLocal entrypoint.sh input"

    - name: run hadoop's wordcount job
      command: "{{ hadoop }} jar {{ examples }} wordcount input output"
      register: result
    - debug: var=result.stderr.split('\n')

    - name: view the results
      command: "{{ hadoop }} dfs -ls output"
      register: result
    - debug: var=result.stdout_lines
