# Author: Michael Sevilla
# Create a Ceph development node (with the source code) and start it on the localhost

#- name: compile ceph src
#  hosts: Builder
#  vars:
#    - BUILD_THREADS: 32
#    - CEPH_PKGS: --with-lttng
#    - GIT_URL: https://github.com/michaelsevilla/ceph.git
#    - SHA1_OR_REF: remotes/origin/wip-reqlatency
#  roles: [ceph-build]

- name: start ceph container
  hosts: Workers
  roles: [ceph]

- name: start ceph
  hosts: ceph_mon_containers
  gather_facts: True
  tasks:
    - copy: src=/infra/roles/ceph/files/standalone.sh dest=/standalone.sh
    - shell: chmod 755 /standalone.sh; /standalone.sh
    - shell: 

