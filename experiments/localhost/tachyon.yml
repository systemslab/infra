# Author: Michael Sevilla
# Create a Tachyon development node (with the source code) and start it on the localhost

- name: clone, compile, package tachyon src
  hosts: Builder
  roles: [tachyon-build]

- name: start tachyon container 
  hosts: Workers
  roles: [tachyon]
  tasks: 
    - name: add the tachyon container to the ansible hosts
      add_host: name={{ inventory_hostname }} ansible_ssh_user=root ansible_ssh_port=2222 group=tachyon_master_containers

- name: start tachyon
  hosts: tachyon_master_containers
  gather_facts: True
  tasks: 
      - shell: /tachyon/bin/tachyon format
      - shell: /tachyon/bin/tachyon-start.sh local
