---
# Checks to see if all nodes came up

- hosts: worker
  tasks:
  - name: wait for the SSH port on the container to become active
    wait_for: port={{ worker_sshd_port }} host={{ ansible_ssh_host | default(inventory_hostname) }}
  - name: check if the worker container is up
    shell: docker ps | grep {{ container_name_worker }}
    changed_when: False

- hosts: master
  tasks:
  - name: wait for the SSH port on the container to become active
    wait_for: port={{ worker_sshd_port }} host={{ ansible_ssh_host | default(inventory_hostname) }}
  - name: check if the master container is up
    shell: docker ps | grep {{ container_name_master }}
    changed_when: False
